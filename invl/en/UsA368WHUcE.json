{
  "video_id": "UsA368WHUcE",
  "title": "The Diplomacy AI in Total War: Attila (Part 4 of 5) | AI and Games",
  "json": [
    {
      "index": 1,
      "start_time": 8029.0,
      "end_time": 19710.0,
      "text": "Hi I'm Tommy Thompson, this is AI and Games\nand welcome to part 4 of the AI of Total War."
    },
    {
      "index": 2,
      "start_time": 19710.0,
      "end_time": 24270.0,
      "text": "In part 3 of this series I explored the campaign\nAI of one of the most pivotal entries in the"
    },
    {
      "index": 3,
      "start_time": 24270.0,
      "end_time": 31149.0,
      "text": "franchise: 2013's Total War: Rome II. A game\nthat completely re-built the campaign AI systems"
    },
    {
      "index": 4,
      "start_time": 31149.0,
      "end_time": 36370.0,
      "text": "to accommodate for an increasingly more complex\nseries of mechanics, resources and consequences."
    },
    {
      "index": 5,
      "start_time": 36370.0,
      "end_time": 40460.0,
      "text": "Rome II's adoption of the Monte Carlo Tree\nSearch algorithm is a critical step in bring"
    },
    {
      "index": 6,
      "start_time": 40460.0,
      "end_time": 45620.0,
      "text": "the campaign AI up to spec for more contemporary\nentries in the series. But the innovations"
    },
    {
      "index": 7,
      "start_time": 45620.0,
      "end_time": 50820.0,
      "text": "at campaign level didn't stop there. In this\nvideo I'm going to look at how the MCTS systems"
    },
    {
      "index": 8,
      "start_time": 50820.0,
      "end_time": 55629.0,
      "text": "were improved upon, as well as how the diplomacy\nsystems have been scaled up for the modern"
    },
    {
      "index": 9,
      "start_time": 55629.0,
      "end_time": 61929.0,
      "text": "era as Rome gave way to 2015's Total War:\nAttila."
    },
    {
      "index": 10,
      "start_time": 61929.0,
      "end_time": 66580.0,
      "text": "Attila is the ninth entry in the Total War\nfranchise and transposes the conflict to the"
    },
    {
      "index": 11,
      "start_time": 66580.0,
      "end_time": 72311.0,
      "text": "late 4th and early 5th century: a period of\nhistory known as the Migration Period. The"
    },
    {
      "index": 12,
      "start_time": 72311.0,
      "end_time": 78040.0,
      "text": "Roman Empire begins to falter, even fracture;\nthe empire is separated with the latin-speaking"
    },
    {
      "index": 13,
      "start_time": 78040.0,
      "end_time": 83800.0,
      "text": "Roman Empire to the west and the greek-speaking\nByzantine Empire to the east. The Roman Empire"
    },
    {
      "index": 14,
      "start_time": 83800.0,
      "end_time": 88930.0,
      "text": "is on borrowed time and will only survive\nanother 200 years at best as it is besieged"
    },
    {
      "index": 15,
      "start_time": 88930.0,
      "end_time": 94939.0,
      "text": "by the vandals, franks, saxons and perhaps\nmost importantly, the huns. Players bring"
    },
    {
      "index": 16,
      "start_time": 94939.0,
      "end_time": 100329.0,
      "text": "Attila the Huns rise to power as the Hunnic\nempire forms over what is now eastern europe."
    },
    {
      "index": 17,
      "start_time": 100329.0,
      "end_time": 105750.0,
      "text": "Total War: Attila is in many respects a natural\nsuccessor to Total War: Rome II - with a campaign"
    },
    {
      "index": 18,
      "start_time": 105750.0,
      "end_time": 110580.0,
      "text": "map of similar size and shape that succeeds\nthe rise of the Roman empire in the previous"
    },
    {
      "index": 19,
      "start_time": 110580.0,
      "end_time": 116140.0,
      "text": "title, only to see it crack and crumble with\na total 0f 56 factions appearing as either"
    },
    {
      "index": 20,
      "start_time": 116140.0,
      "end_time": 120679.0,
      "text": "ally or foe in the original version of the\ngame."
    },
    {
      "index": 21,
      "start_time": 120679.0,
      "end_time": 124710.0,
      "text": "But of course, it's not just the change of\nsetting, the underlying tech continues to"
    },
    {
      "index": 22,
      "start_time": 124710.0,
      "end_time": 129680.0,
      "text": "change and evolve as well. The introduction\nof Monte Carlo Tree Search in Rome II, the"
    },
    {
      "index": 23,
      "start_time": 129680.0,
      "end_time": 135450.0,
      "text": "focus of part 3 of this series, was a massive\nundertaking. MCTS had not made the transition"
    },
    {
      "index": 24,
      "start_time": 135450.0,
      "end_time": 140010.0,
      "text": "into AAA gaming at that time and naturally\nthere was still much to learn as to how to"
    },
    {
      "index": 25,
      "start_time": 140010.0,
      "end_time": 145060.0,
      "text": "utilise the systems full potential. So let's\ntake a look at the gradual changes and improvements"
    },
    {
      "index": 26,
      "start_time": 145060.0,
      "end_time": 149209.0,
      "text": "made to the algorithm between post-launch\nupdates for Rome II, all the way the launch"
    },
    {
      "index": 27,
      "start_time": 149209.0,
      "end_time": 151360.0,
      "text": "of Attila."
    },
    {
      "index": 28,
      "start_time": 151360.0,
      "end_time": 156760.0,
      "text": "The MCTS was updated to address some notable\nissues in performance and results. Notably,"
    },
    {
      "index": 29,
      "start_time": 156760.0,
      "end_time": 160980.0,
      "text": "the algorithm was slow to decide, but was\ntypically making good choices. A big part"
    },
    {
      "index": 30,
      "start_time": 160980.0,
      "end_time": 165260.0,
      "text": "of this was that state space coverage becomes\nincreasingly difficulty the longer the game"
    },
    {
      "index": 31,
      "start_time": 165260.0,
      "end_time": 170010.0,
      "text": "progresses: the number of AI factions begins\nto grow, the number of possible future states"
    },
    {
      "index": 32,
      "start_time": 170010.0,
      "end_time": 175050.0,
      "text": "grows at an exponential rate. In addition,\nthe underlying pathfinding tools to calculate"
    },
    {
      "index": 33,
      "start_time": 175050.0,
      "end_time": 180310.0,
      "text": "distances between factions and the like during\nMCTS playouts was proving very expensive."
    },
    {
      "index": 34,
      "start_time": 180310.0,
      "end_time": 184970.0,
      "text": "To resolve this, the algorithm was trimmed\nto prune the number of strategies it considers."
    },
    {
      "index": 35,
      "start_time": 184970.0,
      "end_time": 190170.0,
      "text": "This required additional analysis of a given\nstate using metrics from the developers itself,"
    },
    {
      "index": 36,
      "start_time": 190170.0,
      "end_time": 194800.0,
      "text": "to determine whether a target was unreachable,\na battle was unwinnable, there was a low probability"
    },
    {
      "index": 37,
      "start_time": 194800.0,
      "end_time": 199319.0,
      "text": "of a strategy succeeding or a given path in\nthe tree was redundant and then removed it"
    },
    {
      "index": 38,
      "start_time": 199319.0,
      "end_time": 204360.0,
      "text": "from the decision making process. This last\npart isn't as easy as it might sound, given"
    },
    {
      "index": 39,
      "start_time": 204360.0,
      "end_time": 208739.0,
      "text": "a lot of strategies are essentially identical:\nexecuted in a slightly different order and"
    },
    {
      "index": 40,
      "start_time": 208739.0,
      "end_time": 213879.0,
      "text": "result in a similar outcome. This required\nthe system to break up searching into sub-phases"
    },
    {
      "index": 41,
      "start_time": 213879.0,
      "end_time": 219000.0,
      "text": "such that is enforced an arbitrary ordering.\nThis helped identify multiple strategies that"
    },
    {
      "index": 42,
      "start_time": 219000.0,
      "end_time": 223680.0,
      "text": "essentially the same when ordered a specific\nway. In addition, this all required aggressive"
    },
    {
      "index": 43,
      "start_time": 223680.0,
      "end_time": 228350.0,
      "text": "patching of the pathfinding system to pre-cache\nsome calculations and simply reduce the number"
    },
    {
      "index": 44,
      "start_time": 228350.0,
      "end_time": 234159.0,
      "text": "of calculations taken, only asking if the\nMCTS decision making process deemed it necessary."
    },
    {
      "index": 45,
      "start_time": 234159.0,
      "end_time": 239099.0,
      "text": "This resulted in a system that was more memory\nefficient and ultimately faster. It shows"
    },
    {
      "index": 46,
      "start_time": 239099.0,
      "end_time": 243659.0,
      "text": "that the MCTS algorithm, while relatively\nsimple in its design and execution, is also"
    },
    {
      "index": 47,
      "start_time": 243659.0,
      "end_time": 248480.0,
      "text": "once that requires additional care when tackling\nlarge and complex problem spaces. Given it"
    },
    {
      "index": 48,
      "start_time": 248480.0,
      "end_time": 252640.0,
      "text": "may need some assistance in order to make\nits decisions more efficiently. Especially"
    },
    {
      "index": 49,
      "start_time": 252640.0,
      "end_time": 264190.0,
      "text": "when trying to ship it in a AAA product."
    },
    {
      "index": 50,
      "start_time": 264190.0,
      "end_time": 269150.0,
      "text": "One area of the franchise I have not yet touched\non is the notion of diplomacy: the process"
    },
    {
      "index": 51,
      "start_time": 269150.0,
      "end_time": 275401.0,
      "text": "by which campaign AI players accept, offer\nand negotiate trade deals and alliances. Diplomacy"
    },
    {
      "index": 52,
      "start_time": 275401.0,
      "end_time": 280780.0,
      "text": "is driven by an entire AI system in and of\nitself. Adding to the steadily growing collection"
    },
    {
      "index": 53,
      "start_time": 280780.0,
      "end_time": 286570.0,
      "text": "of AI subsystems such threat analysis, pathfinding\nand siege battles, which I will cover in part"
    },
    {
      "index": 54,
      "start_time": 286570.0,
      "end_time": 292080.0,
      "text": "5. Diplomacy is primarily interested in answering\nthree key questions for the campaign AI on"
    },
    {
      "index": 55,
      "start_time": 292080.0,
      "end_time": 295750.0,
      "text": "a given turn:"
    },
    {
      "index": 56,
      "start_time": 295750.0,
      "end_time": 308780.0,
      "text": "It"
    },
    {
      "index": 57,
      "start_time": 308780.0,
      "end_time": 313389.0,
      "text": "needs to ensure the deal is valuable to both\nparties. This is both valid for an incoming"
    },
    {
      "index": 58,
      "start_time": 313389.0,
      "end_time": 318319.0,
      "text": "or outgoing deal, given it wants the other\nfaction to accept its proposal, but conversly"
    },
    {
      "index": 59,
      "start_time": 318319.0,
      "end_time": 322090.0,
      "text": "it may need to haggle an incoming proposal\nto its satisfaction."
    },
    {
      "index": 60,
      "start_time": 322090.0,
      "end_time": 326199.0,
      "text": "The Diplomacy system is driven by the same\ninformation and logic as the player, it can't"
    },
    {
      "index": 61,
      "start_time": 326199.0,
      "end_time": 330759.0,
      "text": "take any shortcuts, even when two AI factions\nare dealing with one another. They still go"
    },
    {
      "index": 62,
      "start_time": 330759.0,
      "end_time": 335431.0,
      "text": "through the same process as a player would\neither with an AI or another player. This"
    },
    {
      "index": 63,
      "start_time": 335431.0,
      "end_time": 340289.0,
      "text": "is a highly data-driven process, with each\nfaction having specific and unique configurations"
    },
    {
      "index": 64,
      "start_time": 340289.0,
      "end_time": 345480.0,
      "text": "of values that drive diplomacy in an effort\nto ensure they all behave slightly differently."
    },
    {
      "index": 65,
      "start_time": 345480.0,
      "end_time": 349740.0,
      "text": "This is pretty important in deriving their\npersonality throughout a given campaign, which"
    },
    {
      "index": 66,
      "start_time": 349740.0,
      "end_time": 352550.0,
      "text": "I'll come back to discuss a little bit later."
    },
    {
      "index": 67,
      "start_time": 352550.0,
      "end_time": 357759.0,
      "text": "In order for the AI to pull it off, it transforms\nthese three key questions into diplomacy sub-systems"
    },
    {
      "index": 68,
      "start_time": 357759.0,
      "end_time": 363580.0,
      "text": "(or sub-sub-systems I guess). Deal evaluation,\ngeneration and negotiation. Each of these"
    },
    {
      "index": 69,
      "start_time": 363580.0,
      "end_time": 367960.0,
      "text": "systems utilises four key metrics that are\ngenerated by the system given the incoming"
    },
    {
      "index": 70,
      "start_time": 367960.0,
      "end_time": 370090.0,
      "text": "information it has received:"
    },
    {
      "index": 71,
      "start_time": 370090.0,
      "end_time": 374830.0,
      "text": "- The economic value: Is this deal going to\nactually benefit me monetarily?"
    },
    {
      "index": 72,
      "start_time": 374830.0,
      "end_time": 378789.0,
      "text": "- The stance value: Do I even like these guys\nwho are negotiating with me?"
    },
    {
      "index": 73,
      "start_time": 378789.0,
      "end_time": 383360.0,
      "text": "- The strategic value: Will I gain a powerful\nally from this deal? This is important for"
    },
    {
      "index": 74,
      "start_time": 383360.0,
      "end_time": 387539.0,
      "text": "war and peace declarations, given the current\nthreat as perceived on the campaign map (done"
    },
    {
      "index": 75,
      "start_time": 387539.0,
      "end_time": 391979.0,
      "text": "so using influence mapping) can help determine\nwhether this will make life easier, or more"
    },
    {
      "index": 76,
      "start_time": 391979.0,
      "end_time": 395630.0,
      "text": "difficult.\n- And the diplomatic value: What will other"
    },
    {
      "index": 77,
      "start_time": 395630.0,
      "end_time": 398160.0,
      "text": "factions think of me if I sign into this treaty?"
    },
    {
      "index": 78,
      "start_time": 398160.0,
      "end_time": 402990.0,
      "text": "If diplomatic value is negative, it means\nthat everyone else *really* won't like you"
    },
    {
      "index": 79,
      "start_time": 402990.0,
      "end_time": 407550.0,
      "text": "signing this deal. In addition, things like\nstance and strategic value are influenced"
    },
    {
      "index": 80,
      "start_time": 407550.0,
      "end_time": 412479.0,
      "text": "by a balance factor that is hand-tweaked by\ndesigners. The balance factor is incorporated"
    },
    {
      "index": 81,
      "start_time": 412479.0,
      "end_time": 417759.0,
      "text": "into the difficulty and in-game progression,\nsuch that when an AI is losing badly, it'll"
    },
    {
      "index": 82,
      "start_time": 417759.0,
      "end_time": 422190.0,
      "text": "be more likely to accept offers that might\nnot even by that useful, even from people"
    },
    {
      "index": 83,
      "start_time": 422190.0,
      "end_time": 426550.0,
      "text": "they don't really like. Given it may help\nensure their survival."
    },
    {
      "index": 84,
      "start_time": 426550.0,
      "end_time": 430610.0,
      "text": "For deal evaluation, all of these values are\nthen pumped into a weight summation function"
    },
    {
      "index": 85,
      "start_time": 430610.0,
      "end_time": 435629.0,
      "text": "to give what is called the Deal Value: if\nthe deal is scored as higher than 0, it means"
    },
    {
      "index": 86,
      "start_time": 435629.0,
      "end_time": 439110.0,
      "text": "that it is worth the AI player accepting that\ndeal."
    },
    {
      "index": 87,
      "start_time": 439110.0,
      "end_time": 443470.0,
      "text": "Meanwhile in deal generation, it needs to\nmake some smart decisions on what to offer."
    },
    {
      "index": 88,
      "start_time": 443470.0,
      "end_time": 447880.0,
      "text": "The list of all possible diplomatic actions\nis took long to consider, as such the system"
    },
    {
      "index": 89,
      "start_time": 447880.0,
      "end_time": 452590.0,
      "text": "will use a pre-filtered list based on the\ncurrent strategic situation, factoring strategic"
    },
    {
      "index": 90,
      "start_time": 452590.0,
      "end_time": 457100.0,
      "text": "and economic values pertinent to the current\nstate of the game. It then prioritises each"
    },
    {
      "index": 91,
      "start_time": 457100.0,
      "end_time": 461950.0,
      "text": "deal by evaluating it, with the actual evaluation\nshifting throughout gameplay, given that a"
    },
    {
      "index": 92,
      "start_time": 461950.0,
      "end_time": 466280.0,
      "text": "deal may have more or less value at different\ntimes during a given game."
    },
    {
      "index": 93,
      "start_time": 466280.0,
      "end_time": 471490.0,
      "text": "Lastly, the system negotiates deals by starting\nwith a collection of generated deals that"
    },
    {
      "index": 94,
      "start_time": 471490.0,
      "end_time": 476850.0,
      "text": "it evaluated as useful. It will then begin\nto offer these to other players, but is mindful"
    },
    {
      "index": 95,
      "start_time": 476850.0,
      "end_time": 481190.0,
      "text": "of previous offers it has made with a given\nfaction. If it receives an offer that the"
    },
    {
      "index": 96,
      "start_time": 481190.0,
      "end_time": 486180.0,
      "text": "deal evaluation scoring disliked, then it\nwill make a counter offer with a given probability"
    },
    {
      "index": 97,
      "start_time": 486180.0,
      "end_time": 491940.0,
      "text": "or simply reject it. The AI players are made\nto weight a certain number of turns before"
    },
    {
      "index": 98,
      "start_time": 491940.0,
      "end_time": 496220.0,
      "text": "attempting diplomacy with a given faction\nagain, so as to avoid spamming you with new"
    },
    {
      "index": 99,
      "start_time": 496220.0,
      "end_time": 501110.0,
      "text": "offers every 2 minutes. The actual discussion\nbetween faction leaders that takes place during"
    },
    {
      "index": 100,
      "start_time": 501110.0,
      "end_time": 506200.0,
      "text": "negotiation is powered by a separate system\nthat ensures that the dialogue fits the style"
    },
    {
      "index": 101,
      "start_time": 506200.0,
      "end_time": 509020.0,
      "text": "of the people of a given faction."
    },
    {
      "index": 102,
      "start_time": 509020.0,
      "end_time": 513789.0,
      "text": "Speaking of AI factions, by the time all of\nthe DLC was released for Attila, there was"
    },
    {
      "index": 103,
      "start_time": 513789.0,
      "end_time": 518669.0,
      "text": "over 80 factions in the game. So how do you\nmake all of this diplomacy not feel stilted"
    },
    {
      "index": 104,
      "start_time": 518669.0,
      "end_time": 523970.0,
      "text": "or samey with each and every faction you deal\nwith? As mentioned before, the diplomacy system"
    },
    {
      "index": 105,
      "start_time": 523970.0,
      "end_time": 528620.0,
      "text": "is data-driven, so each faction is fed data\nthat influences how it behaves in areas such"
    },
    {
      "index": 106,
      "start_time": 528620.0,
      "end_time": 534650.0,
      "text": "as budgeting, diplomacy evaluations and negotiations\nand technologies. These components craft what"
    },
    {
      "index": 107,
      "start_time": 534650.0,
      "end_time": 540440.0,
      "text": "Creative Assembly consider to be AI personalities.\nEach of these components are often quite extreme"
    },
    {
      "index": 108,
      "start_time": 540440.0,
      "end_time": 546390.0,
      "text": "and binary, with budgeting making the AI range\nfrom Scrooge McDuck to Kanye West. Each of"
    },
    {
      "index": 109,
      "start_time": 546390.0,
      "end_time": 551020.0,
      "text": "these personality traits are effectively communicated\nvia the user interface, such that players"
    },
    {
      "index": 110,
      "start_time": 551020.0,
      "end_time": 554510.0,
      "text": "can establish just how to deal with a given\nfaction."
    },
    {
      "index": 111,
      "start_time": 554510.0,
      "end_time": 558671.0,
      "text": "But it's not enough to have just a static\npersonality throughout a given campaign, it"
    },
    {
      "index": 112,
      "start_time": 558671.0,
      "end_time": 563880.0,
      "text": "needs to change and evolve over time. As such,\neach faction has a personality group with"
    },
    {
      "index": 113,
      "start_time": 563880.0,
      "end_time": 568270.0,
      "text": "multiple personalities it can choose from.\nThe choice of selection which personality"
    },
    {
      "index": 114,
      "start_time": 568270.0,
      "end_time": 572390.0,
      "text": "it wants to use is driven by a number of factors,\nsuch as the current difficulty of the game"
    },
    {
      "index": 115,
      "start_time": 572390.0,
      "end_time": 578520.0,
      "text": "and the stage of the campaign itself. As such,\nultra-aggressive BURN IT ALL DOWN style personalities"
    },
    {
      "index": 116,
      "start_time": 578520.0,
      "end_time": 582710.0,
      "text": "don't appear as frequently at the start of\nthe campaign, but are more likely to appear"
    },
    {
      "index": 117,
      "start_time": 582710.0,
      "end_time": 587920.0,
      "text": "towards end-game. In addition, many of the\npersonality swaps are tied into the progression"
    },
    {
      "index": 118,
      "start_time": 587920.0,
      "end_time": 592390.0,
      "text": "of faction leadership: with new personalities\nadopted as a faction leader dies and their"
    },
    {
      "index": 119,
      "start_time": 592390.0,
      "end_time": 601780.0,
      "text": "heir comes to power."
    },
    {
      "index": 120,
      "start_time": 601780.0,
      "end_time": 606620.0,
      "text": "While deciding how to conduct war can be challenging,\nso to can be forging alliances and making"
    },
    {
      "index": 121,
      "start_time": 606620.0,
      "end_time": 611840.0,
      "text": "peace with others. The scope and complexity\nof Total War continues to be vast in scale,"
    },
    {
      "index": 122,
      "start_time": 611840.0,
      "end_time": 616300.0,
      "text": "to a point that the number of minor AI systems\ncontinues grow in order to support the unit,"
    },
    {
      "index": 123,
      "start_time": 616300.0,
      "end_time": 621320.0,
      "text": "battle and campaign AI. But diplomacy isn't\nenough in times of conflict, sometimes we"
    },
    {
      "index": 124,
      "start_time": 621320.0,
      "end_time": 626831.0,
      "text": "just need to force our point of view on our\nenemies. To make them bow to our will. In"
    },
    {
      "index": 125,
      "start_time": 626831.0,
      "end_time": 632220.0,
      "text": "part 5 of my exploration of the AI of Total\nWar, I'm going to look at another of the AI"
    },
    {
      "index": 126,
      "start_time": 632220.0,
      "end_time": 637220.0,
      "text": "subsystems in play: one that is responsible\nfor laying siege to an enemy fortification."
    },
    {
      "index": 127,
      "start_time": 637220.0,
      "end_time": 640840.0,
      "text": "While these have been critical to the series\nfor many iterations, I'm going to take a look"
    },
    {
      "index": 128,
      "start_time": 640840.0,
      "end_time": 644730.0,
      "text": "at the more recent innovations brought to\nthis system alongside some fresh perspective"
    },
    {
      "index": 129,
      "start_time": 644730.0,
      "end_time": 650529.0,
      "text": "for the franchise: as history is cast aside\nfor fantasy and we enter the world of Warhammer."
    }
  ]
}